<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agora - Student Government Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-purple: #667eea;
            --secondary-purple: #764ba2;
            --dark-bg: #0f0f23;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-light: rgba(255, 255, 255, 0.9);
            --text-dark: #1f2937;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--text-light);
            background: var(--dark-bg);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Enhanced floating orbs background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            overflow: hidden;
        }

        .floating-orb {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(102, 126, 234, 0.4), rgba(118, 75, 162, 0.2));
            filter: blur(2px);
            animation: float 20s infinite linear;
        }

        .orb-1 { width: 200px; height: 200px; top: 10%; left: 10%; animation-duration: 25s; }
        .orb-2 { width: 150px; height: 150px; top: 60%; right: 15%; animation-duration: 30s; animation-direction: reverse; }
        .orb-3 { width: 100px; height: 100px; bottom: 20%; left: 20%; animation-duration: 35s; }
        .orb-4 { width: 120px; height: 120px; top: 30%; right: 30%; animation-duration: 28s; animation-direction: reverse; }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(50px, -30px) rotate(90deg); }
            50% { transform: translate(-20px, 40px) rotate(180deg); }
            75% { transform: translate(-40px, -20px) rotate(270deg); }
        }

        /* Particle system */
        .particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: var(--primary-purple);
            border-radius: 50%;
            opacity: 0.6;
            animation: particle-float 15s infinite linear;
        }

        @keyframes particle-float {
            0% { transform: translateY(100vh) translateX(0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100px) translateX(100px); opacity: 0; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            position: relative;
            z-index: 10;
        }

        /* Enhanced Header */
        header {
            background: rgba(15, 15, 35, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            padding: 1.5rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 2rem;
            max-width: 100%;
            overflow: hidden;
        }

        .logo {
            font-size: 2.5rem;
            font-weight: 900;
            color: white;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.05em;
            padding: 0.5rem 0;
            display: inline-block;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-link {
            color: var(--text-light);
            text-decoration: none;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background: var(--glass-bg);
            color: white;
        }

        .stats {
            display: flex;
            gap: 3rem;
            font-size: 0.9rem;
        }

        .stat-item {
            text-align: center;
            position: relative;
        }

        .stat-number {
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.8rem;
            display: block;
            margin-bottom: 0.25rem;
        }

        .stat-label {
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-size: 0.75rem;
            opacity: 0.8;
        }

        /* Enhanced Hero Section */
        .hero {
            padding: 8rem 0 6rem;
            text-align: center;
            position: relative;
            min-height: 80vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 1000px;
        }

        .hero h1 {
            font-size: 4.5rem;
            font-weight: 900;
            margin-bottom: 2rem;
            letter-spacing: -0.05em;
            line-height: 1.3;
            color: white;
            background: linear-gradient(135deg, white, rgba(255, 255, 255, 0.8));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            padding: 0.5rem 0;
            display: inline-block;
        }

        .hero p {
            font-size: 1.5rem;
            margin-bottom: 3rem;
            opacity: 0.9;
            font-weight: 400;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .cta-buttons {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .cta-primary, .cta-secondary {
            padding: 1.25rem 2.5rem;
            font-size: 1.1rem;
            font-weight: 700;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .cta-primary {
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-purple));
            color: white;
            border: none;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .cta-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
        }

        .cta-secondary {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            color: white;
            border: 2px solid var(--glass-border);
        }

        .cta-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
        }

        /* Enhanced Main Content */
        .main-content {
            background: rgba(15, 15, 35, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            margin: 0 2rem 6rem 2rem;
            position: relative;
            z-index: 10;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .tab {
            flex: 1;
            padding: 1.5rem 2rem;
            text-align: center;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.7);
            transition: all 0.3s ease;
            position: relative;
        }

        .tab:hover {
            color: rgba(255, 255, 255, 0.9);
            background: rgba(255, 255, 255, 0.1);
        }

        .tab.active {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-purple), var(--secondary-purple));
        }

        .tab-content {
            padding: 3rem;
        }

        /* Enhanced Petition Cards */
        .petition-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 2rem;
        }

        .petition-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 16px;
            padding: 2.5rem;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .petition-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: left 0.6s;
        }

        .petition-card:hover::before {
            left: 100%;
        }

        .petition-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.2);
            border-color: rgba(102, 126, 234, 0.4);
            background: rgba(255, 255, 255, 0.12);
        }

        .petition-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
            gap: 1rem;
        }

        .petition-title {
            font-size: 1.4rem;
            font-weight: 800;
            color: white;
            margin-bottom: 1rem;
            line-height: 1.3;
        }

        .petition-category {
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-purple));
            color: white;
            padding: 0.5rem 1rem;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-radius: 20px;
            white-space: nowrap;
        }

        .petition-description {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 2rem;
            line-height: 1.7;
            font-size: 1rem;
        }

        .petition-progress {
            margin-bottom: 2rem;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.1);
            height: 10px;
            overflow: hidden;
            margin-bottom: 1rem;
            border-radius: 10px;
            position: relative;
        }

        .progress-fill {
            background: linear-gradient(90deg, var(--primary-purple), var(--secondary-purple));
            height: 100%;
            transition: width 1s ease;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 600;
        }

        .progress-text strong {
            color: white;
        }

        .petition-actions {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .sign-button {
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-purple));
            color: white;
            border: none;
            padding: 1rem 2rem;
            cursor: pointer;
            font-weight: 700;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            flex: 1;
            max-width: 200px;
        }

        .sign-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .sign-button:disabled {
            background: linear-gradient(135deg, #6366f1, #8b5cf6) !important;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3) !important;
            opacity: 0.9;
        }

        .share-button, .view-button {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 1rem 1.5rem;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            border-radius: 10px;
        }

        .share-button:hover, .view-button:hover {
            background: rgba(102, 126, 234, 0.2);
            border-color: var(--primary-purple);
            color: white;
            transform: translateY(-2px);
        }

        .petition-meta {
            display: flex;
            gap: 2rem;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.6);
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-weight: 600;
            flex-wrap: wrap;
        }

        .urgency-indicator {
            width: 4px;
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            border-radius: 0 4px 4px 0;
        }

        .urgency-high .urgency-indicator { background: var(--danger); }
        .urgency-medium .urgency-indicator { background: var(--warning); }
        .urgency-low .urgency-indicator { background: var(--success); }

        .status-badge {
            padding: 0.4rem 0.8rem;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-radius: 12px;
            border: 1px solid;
        }

        .status-active {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(34, 197, 94, 0.1));
            color: #22c55e;
            border-color: rgba(34, 197, 94, 0.3);
        }

        .status-review {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.1));
            color: #f59e0b;
            border-color: rgba(245, 158, 11, 0.3);
        }

        .status-success {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(59, 130, 246, 0.1));
            color: #3b82f6;
            border-color: rgba(59, 130, 246, 0.3);
        }

        /* Priority indicators */
        .priority-high { color: var(--danger); }
        .priority-medium { color: var(--warning); }
        .priority-low { color: var(--success); }

        /* Enhanced Footer */
        .footer-info {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.95) 0%, rgba(118, 75, 162, 0.95) 100%);
            backdrop-filter: blur(20px);
            color: white;
            padding: 6rem 3rem;
            text-align: center;
            margin: 0 2rem 6rem 2rem;
            border-radius: 24px;
            position: relative;
            overflow: hidden;
        }

        .footer-content {
            position: relative;
            z-index: 2;
        }

        .footer-info h3 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 2rem;
            letter-spacing: -0.025em;
        }

        .footer-info p {
            font-size: 1.2rem;
            line-height: 1.7;
            opacity: 0.95;
            max-width: 800px;
            margin: 0 auto 3rem;
        }

        .footer-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .feature-item {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 2rem;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .feature-icon {
            width: 48px;
            height: 48px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .feature-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .feature-desc {
            opacity: 0.9;
            line-height: 1.6;
        }

        /* Mobile Responsive */
        @media (max-width: 1024px) {
            .petition-grid {
                grid-template-columns: 1fr;
            }
            
            .stats {
                gap: 2rem;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 1rem;
            }
            
            .main-content, .footer-info {
                margin: 0 1rem 4rem 1rem;
            }
            
            .hero h1 {
                font-size: 3rem;
            }
            
            .hero p {
                font-size: 1.25rem;
            }
            
            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .stats {
                flex-direction: column;
                gap: 1rem;
            }
            
            .petition-actions {
                flex-direction: column;
            }
            
            .petition-header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }
            
            .nav-links {
                display: none;
            }
            
            .header-content {
                flex-direction: column;
                text-align: center;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.6s ease forwards;
        }

        /* Success Message */
        .success-message {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-purple));
            color: white;
            padding: 1rem 2rem;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            font-weight: 600;
            max-width: 300px;
        }

        .success-message.show {
            transform: translateX(0);
        }

        /* Petition Details Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            max-width: 900px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.4s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            padding: 2.5rem 2.5rem 0;
            border-bottom: 1px solid #f3f4f6;
            margin-bottom: 0;
        }

        .modal-close {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: #f3f4f6;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 1.2rem;
            color: #6b7280;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            background: #e5e7eb;
            color: #374151;
        }

        .modal-title {
            font-size: 2rem;
            font-weight: 800;
            color: var(--text-dark);
            margin-bottom: 1rem;
            line-height: 1.3;
        }

        .modal-category {
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-purple));
            color: white;
            padding: 0.5rem 1rem;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 1.5rem;
        }

        .modal-body {
            padding: 2rem 2.5rem;
        }

        .petition-details {
            margin-bottom: 3rem;
        }

        .petition-details h3 {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 1rem;
        }

        .petition-details p {
            color: #4b5563;
            line-height: 1.7;
            margin-bottom: 1.5rem;
        }

        .petition-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
            padding: 2rem;
            background: #f9fafb;
            border-radius: 12px;
        }

        .stat-box {
            text-align: center;
        }

        .stat-box .number {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: block;
        }

        .stat-box .label {
            font-size: 0.85rem;
            color: #6b7280;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .discussion-section {
            border-top: 1px solid #f3f4f6;
            padding-top: 2rem;
        }

        .discussion-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .discussion-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-dark);
        }

        .comment-form {
            background: #f9fafb;
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
        }

        .comment-form-fields {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .comment-name, .comment-email {
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-family: inherit;
            font-size: 0.95rem;
            transition: border-color 0.3s ease;
        }

        .comment-name:focus, .comment-email:focus {
            outline: none;
            border-color: var(--primary-purple);
        }

        .comment-input {
            width: 100%;
            min-height: 80px;
            padding: 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-family: inherit;
            font-size: 0.95rem;
            resize: vertical;
            transition: border-color 0.3s ease;
            margin-bottom: 1rem;
        }

        .comment-input:focus {
            outline: none;
            border-color: var(--primary-purple);
        }

        .comment-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .comment-submit {
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-purple));
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .comment-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .comment-count {
            color: #6b7280;
            font-size: 0.9rem;
        }

        .comments-list {
            space-y: 1.5rem;
        }

        .comment {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .comment:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .comment-author {
            font-weight: 600;
            color: var(--text-dark);
        }

        .comment-time {
            color: #6b7280;
            font-size: 0.85rem;
        }

        .comment-text {
            color: #4b5563;
            line-height: 1.6;
            margin-bottom: 0.75rem;
        }

        .comment-actions-bar {
            display: flex;
            gap: 1rem;
            font-size: 0.85rem;
        }

        .comment-action {
            color: #6b7280;
            cursor: pointer;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .comment-action:hover {
            color: var(--primary-purple);
        }

        .comment-action.liked {
            color: var(--primary-purple);
        }

        .modal-footer {
            padding: 1.5rem 2.5rem 2.5rem;
            border-top: 1px solid #f3f4f6;
            background: #f9fafb;
            border-radius: 0 0 20px 20px;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        /* Celebration Animation */
        .celebration-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        .celebration-particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: var(--primary-purple);
            border-radius: 50%;
            animation: celebrateParticle 2s ease-out forwards;
        }

        .celebration-star {
            position: absolute;
            width: 12px;
            height: 12px;
            background: linear-gradient(45deg, var(--primary-purple), var(--secondary-purple));
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            animation: celebrateStar 1.5s ease-out forwards;
        }

        .celebration-ring {
            position: absolute;
            border: 3px solid var(--primary-purple);
            border-radius: 50%;
            animation: celebrateRing 1s ease-out forwards;
        }

        @keyframes celebrateParticle {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(var(--random-x), var(--random-y)) scale(0);
                opacity: 0;
            }
        }

        @keyframes celebrateStar {
            0% {
                transform: translate(0, 0) scale(0) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: translate(var(--star-x), var(--star-y)) scale(1.2) rotate(180deg);
                opacity: 1;
            }
            100% {
                transform: translate(var(--star-x-end), var(--star-y-end)) scale(0) rotate(360deg);
                opacity: 0;
            }
        }

        @keyframes celebrateRing {
            0% {
                width: 20px;
                height: 20px;
                opacity: 1;
                transform: translate(-10px, -10px);
            }
            100% {
                width: 200px;
                height: 200px;
                opacity: 0;
                transform: translate(-100px, -100px);
            }
        }

        /* Button celebration effect */
        .sign-button.celebrating {
            animation: buttonCelebrate 0.6s ease-out;
            overflow: visible;
        }

        @keyframes buttonCelebrate {
            0% {
                transform: scale(1);
                box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
            }
            25% {
                transform: scale(1.05);
                box-shadow: 0 12px 35px rgba(102, 126, 234, 0.6);
            }
            50% {
                transform: scale(1.1);
                box-shadow: 0 15px 45px rgba(102, 126, 234, 0.8);
            }
            75% {
                transform: scale(1.05);
                box-shadow: 0 12px 35px rgba(102, 126, 234, 0.6);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
            }
        }

        /* Success pulse */
        .success-pulse {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.3), transparent);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: successPulse 1s ease-out;
            pointer-events: none;
        }

        @keyframes successPulse {
            0% {
                width: 60px;
                height: 60px;
                opacity: 0.8;
            }
            100% {
                width: 300px;
                height: 300px;
                opacity: 0;
            }
        }

        /* Empty state styles */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: rgba(255, 255, 255, 0.6);
        }

        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .empty-state p {
            font-size: 1rem;
            line-height: 1.6;
        }

        /* Admin Panel Styles - HIDDEN FROM USERS */
        .admin-toggle {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-purple));
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
            display: none; /* HIDDEN FROM USERS */
        }

        .admin-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.5);
        }

        .admin-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 20px rgba(0, 0, 0, 0.3);
            z-index: 2000;
            transition: right 0.3s ease;
            overflow-y: auto;
        }

        .admin-panel.open {
            right: 0;
        }

        .admin-header {
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-purple));
            color: white;
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-header h3 {
            margin: 0;
            font-size: 1.2rem;
        }

        .admin-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 4px;
            transition: background 0.3s ease;
        }

        .admin-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .admin-content {
            padding: 1.5rem;
        }

        .admin-form {
            margin-bottom: 2rem;
        }

        .admin-form h4 {
            color: var(--text-dark);
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-dark);
            font-size: 0.9rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-family: inherit;
            font-size: 0.9rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-purple);
        }

        .form-group textarea {
            min-height: 80px;
            resize: vertical;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .admin-button {
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-purple));
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 0.5rem;
        }

        .admin-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .admin-button.secondary {
            background: #6b7280;
        }

        .admin-button.danger {
            background: var(--danger);
        }

        .petition-list {
            margin-top: 2rem;
        }

        .petition-item {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .petition-item h5 {
            margin: 0 0 0.5rem 0;
            color: var(--text-dark);
            font-size: 0.95rem;
        }

        .petition-item p {
            margin: 0 0 0.5rem 0;
            color: #6b7280;
            font-size: 0.85rem;
        }

        .petition-item-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .petition-item-actions button {
            padding: 0.25rem 0.75rem;
            font-size: 0.8rem;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .edit-btn {
            background: #3b82f6;
            color: white;
        }

        .delete-btn {
            background: var(--danger);
            color: white;
        }

        .move-btn {
            background: #10b981;
            color: white;
        }

        .admin-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1999;
            display: none;
        }

        .admin-overlay.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="bg-animation" id="bgAnimation"></div>

    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">Agora</div>
                <nav>
                    <ul class="nav-links">
                        <li><a href="#petitions" class="nav-link">Petitions</a></li>
                        <li><a href="#about" class="nav-link">How It Works</a></li>
                        <li><a href="#impact" class="nav-link">Our Impact</a></li>
                        <li><a href="#contact" class="nav-link">Contact</a></li>
                    </ul>
                </nav>
                <div class="stats">
                    <div class="stat-item">
                        <span class="stat-number" id="activeStudentsCount">0</span>
                        <div class="stat-label">Active Students</div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="changesMadeCount">0</span>
                        <div class="stat-label">Changes Made</div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="successRateCount">0%</span>
                        <div class="stat-label">Success Rate</div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <section class="hero">
            <div class="hero-content fade-in-up">
                <h1>Your Voice. Real Change.</h1>
                <p>Join thousands of students creating meaningful change on campus through organized petitions and student government action.</p>
                <div class="cta-buttons">
                    <button class="cta-primary" onclick="scrollToPetitions()">View Active Petitions</button>
                    <a href="#about" class="cta-secondary">Learn How It Works</a>
                </div>
            </div>
        </section>
    </div>

    <div class="main-content" id="petitions">
        <div class="tabs">
            <button class="tab active" onclick="showTab('active')">Active Petitions</button>
            <button class="tab" onclick="showTab('review')">Under Review</button>
            <button class="tab" onclick="showTab('success')">Recent Wins</button>
        </div>

        <div class="tab-content">
            <div id="active-content">
                <div class="petition-grid" id="activePetitionGrid">
                    <!-- Active petitions will be loaded here -->
                </div>
            </div>

            <div id="review-content" style="display: none;">
                <div class="petition-grid" id="reviewPetitionGrid">
                    <!-- Review petitions will be loaded here -->
                </div>
            </div>

            <div id="success-content" style="display: none;">
                <div class="petition-grid" id="successPetitionGrid">
                    <!-- Success stories will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <section class="footer-info" id="about">
            <div class="footer-content">
                <h3>How Agora Creates Change</h3>
                <p>Your Student Government identifies important issues and posts them here. When you sign, you're giving them the backing they need to negotiate with the administration. Together, we make real change happen.</p>
                
                <div class="footer-features">
                    <div class="feature-item">
                        <div class="feature-icon">1</div>
                        <div class="feature-title">Student Government Initiates</div>
                        <div class="feature-desc">Your elected representatives identify key issues affecting student life and create formal petitions.</div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">2</div>
                        <div class="feature-title">Students Unite</div>
                        <div class="feature-desc">You and your fellow students sign petitions to show unified support for important changes.</div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">3</div>
                        <div class="feature-title">Administration Acts</div>
                        <div class="feature-desc">With strong student backing, your Student Government presents proposals to university leadership.</div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">4</div>
                        <div class="feature-title">Change Happens</div>
                        <div class="feature-desc">Real improvements are implemented, making campus life better for everyone.</div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Petition Details Modal -->
    <div class="modal-overlay" id="petitionModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closePetitionModal()">&times;</button>
            
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Petition Title</h2>
                <div class="modal-category" id="modalCategory">Category</div>
            </div>

            <div class="modal-body">
                <div class="petition-details">
                    <h3>Full Description</h3>
                    <p id="modalDescription">Detailed petition description will appear here...</p>
                    
                    <h3>Background & Context</h3>
                    <p id="modalBackground">Additional context and background information about this petition...</p>
                    
                    <h3>Expected Impact</h3>
                    <p id="modalImpact">The expected positive impact this change will have on student life...</p>
                </div>

                <div class="petition-stats" id="modalStats">
                    <div class="stat-box">
                        <span class="number" id="modalSignatures">0</span>
                        <div class="label">Signatures</div>
                    </div>
                    <div class="stat-box">
                        <span class="number" id="modalProgress">0%</span>
                        <div class="label">Progress</div>
                    </div>
                    <div class="stat-box">
                        <span class="number" id="modalDaysLeft">0</span>
                        <div class="label">Days Left</div>
                    </div>
                    <div class="stat-box">
                        <span class="number" id="modalComments">0</span>
                        <div class="label">Comments</div>
                    </div>
                </div>

                <div class="discussion-section">
                    <div class="discussion-header">
                        <h3 class="discussion-title">Discussion</h3>
                        <span class="comment-count" id="discussionCount">Join the conversation</span>
                    </div>

                    <div class="comment-form">
                        <div class="comment-form-fields">
                            <input type="text" class="comment-name" id="commentName" placeholder="Your name" required>
                            <input type="email" class="comment-email" id="commentEmail" placeholder="Email (optional)">
                        </div>
                        <textarea class="comment-input" id="commentInput" placeholder="Share your thoughts, experiences, or suggestions about this petition..." required></textarea>
                        <div class="comment-actions">
                            <span class="comment-count">Be respectful and constructive</span>
                            <button class="comment-submit" onclick="addComment()">Post Comment</button>
                        </div>
                    </div>

                    <div class="comments-list" id="commentsList">
                        <!-- Comments will be dynamically added here -->
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <div class="modal-actions">
                    <button class="sign-button" id="modalSignButton" onclick="signPetitionFromModal()">Sign Petition</button>
                    <button class="share-button" onclick="sharePetitionFromModal()">Share</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel - HIDDEN FROM USERS BUT FUNCTIONAL -->
    <!-- Admin Toggle Button is hidden via CSS -->
    <button class="admin-toggle" onclick="toggleAdminPanel()" title="Admin Panel">⚙️</button>
    
    <div class="admin-overlay" id="adminOverlay" onclick="closeAdminPanel()"></div>
    
    <div class="admin-panel" id="adminPanel">
        <div class="admin-header">
            <h3>Admin Panel</h3>
            <button class="admin-close" onclick="closeAdminPanel()">&times;</button>
        </div>
        
        <div class="admin-content">
            <div class="admin-form">
                <h4>Add New Petition</h4>
                <form id="petitionForm" onsubmit="addPetition(event)">
                    <div class="form-group">
                        <label for="petitionTitle">Title *</label>
                        <input type="text" id="petitionTitle" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="petitionCategory">Category *</label>
                            <select id="petitionCategory" required>
                                <option value="">Select category</option>
                                <option value="Academic">Academic</option>
                                <option value="Wellness">Wellness</option>
                                <option value="Environment">Environment</option>
                                <option value="Finance">Finance</option>
                                <option value="Technology">Technology</option>
                                <option value="Food Services">Food Services</option>
                                <option value="Safety">Safety</option>
                                <option value="Infrastructure">Infrastructure</option>
                                <option value="Recreation">Recreation</option>
                                <option value="Inclusion">Inclusion</option>
                                <option value="Financial Aid">Financial Aid</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="petitionStatus">Status *</label>
                            <select id="petitionStatus" required>
                                <option value="active">Active</option>
                                <option value="review">Under Review</option>
                                <option value="success">Implemented</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="petitionDescription">Description *</label>
                        <textarea id="petitionDescription" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="petitionBackground">Background & Context</label>
                        <textarea id="petitionBackground"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="petitionImpact">Expected Impact</label>
                        <textarea id="petitionImpact"></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="petitionGoal">Signature Goal</label>
                            <input type="number" id="petitionGoal" min="1" value="1000">
                        </div>
                        
                        <div class="form-group">
                            <label for="petitionSignatures">Current Signatures</label>
                            <input type="number" id="petitionSignatures" min="0" value="0">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="petitionUrgency">Urgency</label>
                            <select id="petitionUrgency">
                                <option value="low">Low</option>
                                <option value="medium">Medium</option>
                                <option value="high">High</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="petitionPriority">Priority</label>
                            <select id="petitionPriority">
                                <option value="Low">Low</option>
                                <option value="Medium">Medium</option>
                                <option value="High">High</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="petitionMeetingDate">Board Meeting Date</label>
                            <input type="date" id="petitionMeetingDate">
                        </div>
                        
                        <div class="form-group">
                            <label for="petitionDaysLeft">Days Remaining</label>
                            <input type="number" id="petitionDaysLeft" min="0">
                        </div>
                    </div>
                    
                    <div class="form-group" id="implementedFields" style="display: none;">
                        <label for="petitionImplementedDate">Implementation Date</label>
                        <input type="date" id="petitionImplementedDate">
                    </div>
                    
                    <button type="submit" class="admin-button" id="submitButton">Add Petition</button>
                    <button type="button" class="admin-button secondary" onclick="clearForm()">Clear Form</button>
                </form>
            </div>
            
            <div class="petition-list">
                <h4>Manage Petitions</h4>
                <div id="adminPetitionList">
                    <!-- Petition list will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data Management
        let petitionsData = {
            active: [],
            review: [],
            success: []
        };

        let commentsData = {}; // Store comments by petition ID
        let signedPetitions = new Set(); // Track signed petitions
        let currentPetitionId = null;

        // Initialize the application
        function initializeApp() {
            createBackground();
            loadPetitionsData();
            updateHeaderStats();
            loadActiveTab();
            setupAdminPanel();
        }

        // Admin Panel Functions - ALL KEPT FUNCTIONAL
        function setupAdminPanel() {
            // Show/hide implementation fields based on status
            const statusSelect = document.getElementById('petitionStatus');
            statusSelect.addEventListener('change', function() {
                const implementedFields = document.getElementById('implementedFields');
                if (this.value === 'success') {
                    implementedFields.style.display = 'block';
                } else {
                    implementedFields.style.display = 'none';
                }
            });
            
            refreshAdminPetitionList();
        }

        function toggleAdminPanel() {
            const panel = document.getElementById('adminPanel');
            const overlay = document.getElementById('adminOverlay');
            
            panel.classList.toggle('open');
            overlay.classList.toggle('show');
            
            if (panel.classList.contains('open')) {
                refreshAdminPetitionList();
            }
        }

        function closeAdminPanel() {
            document.getElementById('adminPanel').classList.remove('open');
            document.getElementById('adminOverlay').classList.remove('show');
            clearForm();
        }

        function addPetition(event) {
            event.preventDefault();
            
            const form = document.getElementById('petitionForm');
            const formData = new FormData(form);
            
            const petition = {
                id: generateId(),
                title: document.getElementById('petitionTitle').value,
                category: document.getElementById('petitionCategory').value,
                description: document.getElementById('petitionDescription').value,
                background: document.getElementById('petitionBackground').value || 'Additional context will be provided for this petition.',
                impact: document.getElementById('petitionImpact').value || 'This petition will have a positive impact on student life.',
                goal: parseInt(document.getElementById('petitionGoal').value) || 1000,
                signatures: parseInt(document.getElementById('petitionSignatures').value) || 0,
                urgency: document.getElementById('petitionUrgency').value,
                priority: document.getElementById('petitionPriority').value,
                meetingDate: document.getElementById('petitionMeetingDate').value,
                daysLeft: parseInt(document.getElementById('petitionDaysLeft').value) || null,
                implementedDate: document.getElementById('petitionImplementedDate').value || null,
                createdAt: new Date().toISOString()
            };
            
            const status = document.getElementById('petitionStatus').value;
            
            // Add to appropriate array
            petitionsData[status].push(petition);
            
            // Save data
            saveData();
            updateHeaderStats();
            
            // Refresh displays
            if (document.querySelector('.tab.active').textContent.toLowerCase().includes(status)) {
                loadPetitionCards(status);
            }
            
            refreshAdminPetitionList();
            clearForm();
            
            showSuccessMessage('Petition added successfully!');
        }

        function clearForm() {
            document.getElementById('petitionForm').reset();
            document.getElementById('submitButton').textContent = 'Add Petition';
            document.getElementById('submitButton').onclick = null;
            document.getElementById('implementedFields').style.display = 'none';
        }

        function refreshAdminPetitionList() {
            const listContainer = document.getElementById('adminPetitionList');
            const allPetitions = getAllPetitions();
            
            if (allPetitions.length === 0) {
                listContainer.innerHTML = '<p style="color: #6b7280; font-style: italic;">No petitions yet. Add your first petition above!</p>';
                return;
            }
            
            listContainer.innerHTML = allPetitions.map(petition => {
                const status = getStatusFromPetition(petition);
                return `
                    <div class="petition-item">
                        <h5>${petition.title}</h5>
                        <p><strong>Category:</strong> ${petition.category} | <strong>Status:</strong> ${status} | <strong>Signatures:</strong> ${petition.signatures}/${petition.goal}</p>
                        <div class="petition-item-actions">
                            <button class="edit-btn" onclick="editPetition('${petition.id}')">Edit</button>
                            <button class="move-btn" onclick="movePetition('${petition.id}')">Move</button>
                            <button class="delete-btn" onclick="deletePetition('${petition.id}')">Delete</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function getStatusFromPetition(petition) {
            for (const [status, petitions] of Object.entries(petitionsData)) {
                if (petitions.find(p => p.id === petition.id)) {
                    return status.charAt(0).toUpperCase() + status.slice(1);
                }
            }
            return 'Unknown';
        }

        function editPetition(petitionId) {
            const petition = getAllPetitions().find(p => p.id === petitionId);
            if (!petition) return;
            
            // Populate form with petition data
            document.getElementById('petitionTitle').value = petition.title;
            document.getElementById('petitionCategory').value = petition.category;
            document.getElementById('petitionDescription').value = petition.description;
            document.getElementById('petitionBackground').value = petition.background || '';
            document.getElementById('petitionImpact').value = petition.impact || '';
            document.getElementById('petitionGoal').value = petition.goal;
            document.getElementById('petitionSignatures').value = petition.signatures;
            document.getElementById('petitionUrgency').value = petition.urgency;
            document.getElementById('petitionPriority').value = petition.priority;
            document.getElementById('petitionMeetingDate').value = petition.meetingDate || '';
            document.getElementById('petitionDaysLeft').value = petition.daysLeft || '';
            document.getElementById('petitionImplementedDate').value = petition.implementedDate || '';
            
            // Set status
            const currentStatus = getStatusFromPetition(petition).toLowerCase();
            document.getElementById('petitionStatus').value = currentStatus;
            
            // Show implementation fields if needed
            if (currentStatus === 'success') {
                document.getElementById('implementedFields').style.display = 'block';
            }
            
            // Change form to edit mode
            document.getElementById('submitButton').textContent = 'Update Petition';
            document.getElementById('petitionForm').onsubmit = function(e) {
                updatePetition(e, petitionId);
            };
        }

        function updatePetition(event, petitionId) {
            event.preventDefault();
            
            // Remove from current location
            for (const status in petitionsData) {
                petitionsData[status] = petitionsData[status].filter(p => p.id !== petitionId);
            }
            
            // Get the petition object (keeping the original ID and creation date)
            const originalPetition = getAllPetitions().find(p => p.id === petitionId);
            const createdAt = originalPetition?.createdAt || new Date().toISOString();
            
            const petition = {
                id: petitionId,
                title: document.getElementById('petitionTitle').value,
                category: document.getElementById('petitionCategory').value,
                description: document.getElementById('petitionDescription').value,
                background: document.getElementById('petitionBackground').value || 'Additional context will be provided for this petition.',
                impact: document.getElementById('petitionImpact').value || 'This petition will have a positive impact on student life.',
                goal: parseInt(document.getElementById('petitionGoal').value) || 1000,
                signatures: parseInt(document.getElementById('petitionSignatures').value) || 0,
                urgency: document.getElementById('petitionUrgency').value,
                priority: document.getElementById('petitionPriority').value,
                meetingDate: document.getElementById('petitionMeetingDate').value,
                daysLeft: parseInt(document.getElementById('petitionDaysLeft').value) || null,
                implementedDate: document.getElementById('petitionImplementedDate').value || null,
                createdAt: createdAt,
                updatedAt: new Date().toISOString()
            };
            
            const status = document.getElementById('petitionStatus').value;
            
            // Add to new location
            petitionsData[status].push(petition);
            
            // Save and refresh
            saveData();
            updateHeaderStats();
            loadPetitionCards(document.querySelector('.tab.active').textContent.toLowerCase().replace(' petitions', '').replace('recent wins', 'success').replace('under review', 'review'));
            refreshAdminPetitionList();
            clearForm();
            
            showSuccessMessage('Petition updated successfully!');
        }

        function movePetition(petitionId) {
            const petition = getAllPetitions().find(p => p.id === petitionId);
            if (!petition) return;
            
            const currentStatus = getStatusFromPetition(petition).toLowerCase();
            const newStatus = prompt(`Current status: ${currentStatus}\n\nEnter new status (active, review, success):`, currentStatus);
            
            if (!newStatus || !['active', 'review', 'success'].includes(newStatus)) {
                showSuccessMessage('Invalid status. Please use: active, review, or success');
                return;
            }
            
            if (newStatus === currentStatus) return;
            
            // Remove from current status
            for (const status in petitionsData) {
                petitionsData[status] = petitionsData[status].filter(p => p.id !== petitionId);
            }
            
            // Add to new status
            petitionsData[newStatus].push(petition);
            
            // Save and refresh
            saveData();
            updateHeaderStats();
            loadPetitionCards(document.querySelector('.tab.active').textContent.toLowerCase().replace(' petitions', '').replace('recent wins', 'success').replace('under review', 'review'));
            refreshAdminPetitionList();
            
            showSuccessMessage(`Petition moved to ${newStatus}!`);
        }

        function deletePetition(petitionId) {
            if (!confirm('Are you sure you want to delete this petition? This action cannot be undone.')) {
                return;
            }
            
            // Remove from all arrays
            for (const status in petitionsData) {
                petitionsData[status] = petitionsData[status].filter(p => p.id !== petitionId);
            }
            
            // Remove from signed petitions
            signedPetitions.delete(petitionId);
            
            // Remove comments
            delete commentsData[petitionId];
            
            // Save and refresh
            saveData();
            updateHeaderStats();
            loadPetitionCards(document.querySelector('.tab.active').textContent.toLowerCase().replace(' petitions', '').replace('recent wins', 'success').replace('under review', 'review'));
            refreshAdminPetitionList();
            
            showSuccessMessage('Petition deleted successfully!');
        }

        // Create animated background
        function createBackground() {
            const bgAnimation = document.getElementById('bgAnimation');
            
            // Create floating orbs
            for (let i = 1; i <= 4; i++) {
                const orb = document.createElement('div');
                orb.className = `floating-orb orb-${i}`;
                bgAnimation.appendChild(orb);
            }
            
            // Create particles
            const numberOfParticles = 50;
            for (let i = 0; i < numberOfParticles; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                
                bgAnimation.appendChild(particle);
            }
        }

        // Load initial petitions data
        function loadPetitionsData() {
            // In a real application, this would come from an API
            // For now, we'll start with empty arrays and let admins add content
            petitionsData = {
                active: [],
                review: [],
                success: []
            };
            
            // Load from localStorage if available
            const savedData = localStorage.getItem('agoraPetitions');
            if (savedData) {
                try {
                    petitionsData = JSON.parse(savedData);
                } catch (e) {
                    console.error('Error loading saved petitions:', e);
                }
            }

            // Load comments from localStorage
            const savedComments = localStorage.getItem('agoraComments');
            if (savedComments) {
                try {
                    commentsData = JSON.parse(savedComments);
                } catch (e) {
                    console.error('Error loading saved comments:', e);
                }
            }

            // Load signed petitions from localStorage
            const savedSigned = localStorage.getItem('agoraSignedPetitions');
            if (savedSigned) {
                try {
                    signedPetitions = new Set(JSON.parse(savedSigned));
                } catch (e) {
                    console.error('Error loading signed petitions:', e);
                }
            }
        }

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('agoraPetitions', JSON.stringify(petitionsData));
            localStorage.setItem('agoraComments', JSON.stringify(commentsData));
            localStorage.setItem('agoraSignedPetitions', JSON.stringify([...signedPetitions]));
        }

        // Update header statistics
        function updateHeaderStats() {
            const totalSignatures = getAllPetitions().reduce((total, petition) => total + (petition.signatures || 0), 0);
            const successCount = petitionsData.success.length;
            const totalPetitions = getAllPetitions().length;
            const successRate = totalPetitions > 0 ? Math.round((successCount / totalPetitions) * 100) : 0;

            document.getElementById('activeStudentsCount').textContent = totalSignatures.toLocaleString();
            document.getElementById('changesMadeCount').textContent = successCount;
            document.getElementById('successRateCount').textContent = successRate + '%';
        }

        // Get all petitions
        function getAllPetitions() {
            return [...petitionsData.active, ...petitionsData.review, ...petitionsData.success];
        }

        // Generate unique ID for petitions
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        // Create petition card HTML
        function createPetitionCard(petition, type) {
            const progressPercent = petition.goal > 0 ? Math.round((petition.signatures / petition.goal) * 100) : 0;
            const urgencyClass = petition.urgency || 'low';
            const statusClass = type === 'active' ? 'status-active' : 
                               type === 'review' ? 'status-review' : 'status-success';
            const statusText = type === 'active' ? 'Active' : 
                              type === 'review' ? 'Under Review' : 'Implemented';
            
            const isSignedClass = signedPetitions.has(petition.id) ? 'disabled' : '';
            const buttonText = signedPetitions.has(petition.id) ? 'Signed ✓' : 'Sign Petition';

            return `
                <div class="petition-card urgency-${urgencyClass}" data-petition-id="${petition.id}">
                    <div class="urgency-indicator"></div>
                    <div class="petition-header">
                        <div>
                            <div class="petition-title">${petition.title}</div>
                            <div class="status-badge ${statusClass}">${statusText}</div>
                        </div>
                        <div class="petition-category">${petition.category}</div>
                    </div>
                    <div class="petition-description">${petition.description}</div>
                    ${type === 'active' ? `
                        <div class="petition-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${progressPercent}%"></div>
                            </div>
                            <div class="progress-text">
                                <span><strong>${petition.signatures.toLocaleString()} signatures</strong> of ${petition.goal.toLocaleString()} needed</span>
                                <span>${progressPercent}% complete</span>
                            </div>
                        </div>
                        <div class="petition-actions">
                            <button class="sign-button" onclick="signPetition(this)" ${isSignedClass}>${buttonText}</button>
                            <button class="share-button" onclick="sharePetition('${petition.id}')">Share</button>
                            <button class="view-button" onclick="viewDetails('${petition.id}')">Details</button>
                        </div>
                    ` : ''}
                    <div class="petition-meta">
                        ${petition.meetingDate ? `<span>Board meeting: ${formatDate(petition.meetingDate)}</span>` : ''}
                        ${petition.daysLeft ? `<span>${petition.daysLeft} days remaining</span>` : ''}
                        ${petition.priority ? `<span class="priority-${petition.priority.toLowerCase()}">${petition.priority} Priority</span>` : ''}
                        ${type === 'success' && petition.implementedDate ? `<span>Implemented: ${formatDate(petition.implementedDate)}</span>` : ''}
                        ${type === 'success' && petition.impact ? `<span>${petition.impact}</span>` : ''}
                    </div>
                </div>
            `;
        }

        // Format date for display
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { month: 'long', day: 'numeric' });
        }

        // Load and display petitions for active tab
        function loadActiveTab() {
            showTab('active');
        }

        // Tab functionality
        function showTab(tabName) {
            // Hide all content
            document.getElementById('active-content').style.display = 'none';
            document.getElementById('review-content').style.display = 'none';
            document.getElementById('success-content').style.display = 'none';
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            
            // Show selected content and activate tab
            document.getElementById(tabName + '-content').style.display = 'block';
            document.querySelector(`[onclick="showTab('${tabName}')"]`).classList.add('active');
            
            // Load petition cards for the selected tab
            loadPetitionCards(tabName);
            
            // Add fade-in animation
            const content = document.getElementById(tabName + '-content');
            content.style.opacity = '0';
            content.style.transform = 'translateY(20px)';
            
            setTimeout(() => {
                content.style.transition = 'all 0.5s ease';
                content.style.opacity = '1';
                content.style.transform = 'translateY(0)';
            }, 50);
        }

        // Load petition cards for a specific tab
        function loadPetitionCards(tabName) {
            const gridId = tabName + 'PetitionGrid';
            const grid = document.getElementById(gridId);
            const petitions = petitionsData[tabName] || [];

            if (petitions.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state">
                        <h3>No ${tabName} petitions yet</h3>
                        <p>${getEmptyStateMessage(tabName)}</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = petitions.map(petition => createPetitionCard(petition, tabName)).join('');
        }

        // Get empty state message
        function getEmptyStateMessage(tabName) {
            switch (tabName) {
                case 'active':
                    return 'There are currently no active petitions. Check back soon for new student initiatives!';
                case 'review':
                    return 'No petitions are currently under review by the administration.';
                case 'success':
                    return 'Success stories will appear here once petitions are implemented.';
                default:
                    return 'No content available at this time.';
            }
        }

        // Sign petition functionality
        function signPetition(button) {
            if (button.disabled) return;
            
            const card = button.closest('.petition-card');
            const petitionId = card.dataset.petitionId;
            const petition = petitionsData.active.find(p => p.id === petitionId);
            
            if (!petition) return;

            // Add to signed petitions
            signedPetitions.add(petitionId);
            
            // Update petition signature count
            petition.signatures = (petition.signatures || 0) + 1;
            
            // Trigger celebration animation
            triggerCelebrationAnimation(button);
            
            // Update button
            button.textContent = 'Signed ✓';
            button.disabled = true;
            
            // Update progress display
            updatePetitionProgress(card, petition);
            
            // Save data
            saveData();
            updateHeaderStats();
            
            // Show success message
            setTimeout(() => {
                showSuccessMessage('Thank you for signing! Your Student Government will present this petition to the board.');
            }, 800);
        }

        // Update petition progress display
        function updatePetitionProgress(card, petition) {
            const progressPercent = Math.round((petition.signatures / petition.goal) * 100);
            const progressFill = card.querySelector('.progress-fill');
            const progressText = card.querySelector('.progress-text span');
            const percentageSpan = card.querySelector('.progress-text span:last-child');
            
            if (progressFill) {
                progressFill.style.width = progressPercent + '%';
            }
            
            if (progressText) {
                progressText.innerHTML = `<strong>${petition.signatures.toLocaleString()} signatures</strong> of ${petition.goal.toLocaleString()} needed`;
            }
            
            if (percentageSpan) {
                percentageSpan.textContent = progressPercent + '% complete';
            }
        }

        // Share petition functionality
        function sharePetition(petitionId) {
            const petition = getAllPetitions().find(p => p.id === petitionId);
            if (!petition) return;
            
            if (navigator.share) {
                navigator.share({
                    title: `Support: ${petition.title}`,
                    text: `Help make change on our campus by signing this petition: ${petition.title}`,
                    url: window.location.href
                });
            } else {
                const url = `${window.location.href}?petition=${petitionId}`;
                navigator.clipboard.writeText(url).then(() => {
                    showSuccessMessage('Link copied to clipboard! Share it with your fellow students.');
                });
            }
        }

        // View petition details
        function viewDetails(petitionId) {
            const petition = getAllPetitions().find(p => p.id === petitionId);
            if (!petition) return;
            
            currentPetitionId = petitionId;
            openPetitionModal(petition);
        }

        // Open petition modal with details
        function openPetitionModal(petition) {
            const progressPercent = petition.goal > 0 ? Math.round((petition.signatures / petition.goal) * 100) : 0;
            
            // Populate modal content
            document.getElementById('modalTitle').textContent = petition.title;
            document.getElementById('modalCategory').textContent = petition.category;
            document.getElementById('modalDescription').textContent = petition.description;
            document.getElementById('modalSignatures').textContent = (petition.signatures || 0).toLocaleString();
            document.getElementById('modalProgress').textContent = progressPercent + '%';
            document.getElementById('modalDaysLeft').textContent = petition.daysLeft || '0';
            
            // Set detailed background and impact
            document.getElementById('modalBackground').textContent = petition.background || 'Additional details about this petition will be provided here.';
            document.getElementById('modalImpact').textContent = petition.impact || 'This petition will have a positive impact on student life and campus community.';
            
            // Update sign button
            const modalSignButton = document.getElementById('modalSignButton');
            if (signedPetitions.has(petition.id)) {
                modalSignButton.textContent = 'Signed ✓';
                modalSignButton.disabled = true;
            } else {
                modalSignButton.textContent = 'Sign Petition';
                modalSignButton.disabled = false;
            }
            
            // Load comments
            loadComments(petition.id);
            
            // Show modal
            document.getElementById('petitionModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        // Close petition modal
        function closePetitionModal() {
            document.getElementById('petitionModal').classList.remove('show');
            document.body.style.overflow = 'auto';
            currentPetitionId = null;
        }

        // Load comments for a petition
        function loadComments(petitionId) {
            const commentsList = document.getElementById('commentsList');
            const commentCount = document.getElementById('modalComments');
            const discussionCount = document.getElementById('discussionCount');
            
            const comments = commentsData[petitionId] || [];
            
            // Clear existing comments
            commentsList.innerHTML = '';
            
            if (comments.length === 0) {
                commentsList.innerHTML = '<div class="empty-state"><p>No comments yet. Be the first to join the discussion!</p></div>';
                commentCount.textContent = '0';
                discussionCount.textContent = 'Join the conversation';
                return;
            }
            
            // Add comments to the list
            comments.forEach(comment => {
                const commentElement = createCommentElement(comment);
                commentsList.appendChild(commentElement);
            });
            
            // Update comment count
            commentCount.textContent = comments.length.toString();
            discussionCount.textContent = `${comments.length} comment${comments.length !== 1 ? 's' : ''}`;
        }

        // Create comment element
        function createCommentElement(comment) {
            const commentDiv = document.createElement('div');
            commentDiv.className = 'comment';
            
            commentDiv.innerHTML = `
                <div class="comment-header">
                    <span class="comment-author">${comment.author}</span>
                    <span class="comment-time">${formatCommentTime(comment.timestamp)}</span>
                </div>
                <div class="comment-text">${comment.text}</div>
                <div class="comment-actions-bar">
                    <span class="comment-action" onclick="likeComment(this)" data-comment-id="${comment.id}">👍 ${comment.likes || 0}</span>
                    <span class="comment-action" onclick="reportComment('${comment.id}')">Report</span>
                </div>
            `;
            
            return commentDiv;
        }

        // Format comment timestamp
        function formatCommentTime(timestamp) {
            const date = new Date(timestamp);
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 1) return 'Just now';
            if (diffMins < 60) return `${diffMins} minute${diffMins !== 1 ? 's' : ''} ago`;
            if (diffHours < 24) return `${diffHours} hour${diffHours !== 1 ? 's' : ''} ago`;
            if (diffDays < 7) return `${diffDays} day${diffDays !== 1 ? 's' : ''} ago`;
            
            return date.toLocaleDateString();
        }

        // Add new comment
        function addComment() {
            const nameInput = document.getElementById('commentName');
            const emailInput = document.getElementById('commentEmail');
            const commentInput = document.getElementById('commentInput');
            
            const name = nameInput.value.trim();
            const email = emailInput.value.trim();
            const commentText = commentInput.value.trim();
            
            if (!name) {
                showSuccessMessage('Please enter your name.');
                nameInput.focus();
                return;
            }
            
            if (!commentText) {
                showSuccessMessage('Please enter a comment.');
                commentInput.focus();
                return;
            }
            
            if (!currentPetitionId) return;
            
            // Create new comment object
            const newComment = {
                id: generateId(),
                author: name,
                email: email,
                text: commentText,
                timestamp: new Date().toISOString(),
                likes: 0
            };
            
            // Initialize comments array if it doesn't exist
            if (!commentsData[currentPetitionId]) {
                commentsData[currentPetitionId] = [];
            }
            
            // Add comment to the beginning of the array (newest first)
            commentsData[currentPetitionId].unshift(newComment);
            
            // Save data
            saveData();
            
            // Refresh comments display
            loadComments(currentPetitionId);
            
            // Clear form (but keep name for convenience)
            commentInput.value = '';
            emailInput.value = '';
            
            showSuccessMessage('Your comment has been posted! Thank you for joining the discussion.');
        }

        // Like comment functionality
        function likeComment(element) {
            const commentId = element.dataset.commentId;
            if (!currentPetitionId || !commentId) return;
            
            const comments = commentsData[currentPetitionId] || [];
            const comment = comments.find(c => c.id === commentId);
            
            if (comment) {
                comment.likes = (comment.likes || 0) + 1;
                
                // Update display
                const currentText = element.textContent;
                const newLikes = comment.likes;
                element.textContent = `👍 ${newLikes}`;
                element.classList.add('liked');
                
                // Save data
                saveData();
            }
        }

        // Report comment
        function reportComment(commentId) {
            showSuccessMessage('Comment reported. Thank you for helping maintain a respectful discussion.');
        }

        // Sign petition from modal
        function signPetitionFromModal() {
            if (!currentPetitionId) return;
            
            const petition = petitionsData.active.find(p => p.id === currentPetitionId);
            if (!petition) return;
            
            const signButton = document.getElementById('modalSignButton');
            if (signButton.disabled) return;
            
            // Add to signed petitions
            signedPetitions.add(currentPetitionId);
            
            // Update petition signature count
            petition.signatures = (petition.signatures || 0) + 1;
            
            // Trigger celebration animation
            triggerCelebrationAnimation(signButton);
            
            // Update button
            signButton.textContent = 'Signed ✓';
            signButton.disabled = true;
            
            // Update modal stats
            document.getElementById('modalSignatures').textContent = petition.signatures.toLocaleString();
            const progressPercent = Math.round((petition.signatures / petition.goal) * 100);
            document.getElementById('modalProgress').textContent = progressPercent + '%';
            
            // Update main card if visible
            const mainCard = document.querySelector(`[data-petition-id="${currentPetitionId}"]`);
            if (mainCard) {
                updatePetitionProgress(mainCard, petition);
                const mainButton = mainCard.querySelector('.sign-button');
                if (mainButton) {
                    mainButton.textContent = 'Signed ✓';
                    mainButton.disabled = true;
                }
            }
            
            // Save data
            saveData();
            updateHeaderStats();
            
            setTimeout(() => {
                showSuccessMessage('Thank you for signing! Your Student Government will present this petition to the board.');
            }, 800);
        }

        // Share petition from modal
        function sharePetitionFromModal() {
            if (currentPetitionId) {
                sharePetition(currentPetitionId);
            }
        }

        // Celebration animation system
        function triggerCelebrationAnimation(button) {
            // Add celebration class to button
            button.classList.add('celebrating');
            
            // Get button position
            const rect = button.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            // Ensure celebration container exists
            let celebrationContainer = document.getElementById('celebrationContainer');
            if (!celebrationContainer) {
                celebrationContainer = document.createElement('div');
                celebrationContainer.id = 'celebrationContainer';
                celebrationContainer.className = 'celebration-container';
                document.body.appendChild(celebrationContainer);
            }
            
            // Create success pulse
            createSuccessPulse(centerX, centerY);
            
            // Create particle explosion
            createParticleExplosion(centerX, centerY);
            
            // Create star burst
            createStarBurst(centerX, centerY);
            
            // Create expanding rings
            createExpandingRings(centerX, centerY);
            
            // Remove celebration class after animation
            setTimeout(() => {
                button.classList.remove('celebrating');
            }, 600);
        }

        // Create success pulse effect
        function createSuccessPulse(x, y) {
            const celebrationContainer = document.getElementById('celebrationContainer');
            if (!celebrationContainer) return;
            
            const pulse = document.createElement('div');
            pulse.className = 'success-pulse';
            pulse.style.left = x + 'px';
            pulse.style.top = y + 'px';
            
            celebrationContainer.appendChild(pulse);
            
            setTimeout(() => {
                if (pulse.parentNode) {
                    pulse.remove();
                }
            }, 1000);
        }

        // Create particle explosion
        function createParticleExplosion(x, y) {
            const celebrationContainer = document.getElementById('celebrationContainer');
            if (!celebrationContainer) return;
            
            const particleCount = 25;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'celebration-particle';
                
                // Random direction and distance
                const angle = (i / particleCount) * Math.PI * 2;
                const distance = 100 + Math.random() * 100;
                const randomX = Math.cos(angle) * distance + (Math.random() - 0.5) * 50;
                const randomY = Math.sin(angle) * distance + (Math.random() - 0.5) * 50;
                
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                particle.style.setProperty('--random-x', randomX + 'px');
                particle.style.setProperty('--random-y', randomY + 'px');
                
                // Random colors in purple spectrum
                const colors = ['#667eea', '#764ba2', '#9333ea', '#7c3aed', '#8b5cf6'];
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                
                celebrationContainer.appendChild(particle);
                
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.remove();
                    }
                }, 2000);
            }
        }

        // Create star burst effect
        function createStarBurst(x, y) {
            const celebrationContainer = document.getElementById('celebrationContainer');
            if (!celebrationContainer) return;
            
            const starCount = 8;
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'celebration-star';
                
                const angle = (i / starCount) * Math.PI * 2;
                const midDistance = 60 + Math.random() * 40;
                const endDistance = 120 + Math.random() * 80;
                
                const starMidX = Math.cos(angle) * midDistance;
                const starMidY = Math.sin(angle) * midDistance;
                const starEndX = Math.cos(angle) * endDistance;
                const starEndY = Math.sin(angle) * endDistance;
                
                star.style.left = x + 'px';
                star.style.top = y + 'px';
                star.style.setProperty('--star-x', starMidX + 'px');
                star.style.setProperty('--star-y', starMidY + 'px');
                star.style.setProperty('--star-x-end', starEndX + 'px');
                star.style.setProperty('--star-y-end', starEndY + 'px');
                
                celebrationContainer.appendChild(star);
                
                setTimeout(() => {
                    if (star.parentNode) {
                        star.remove();
                    }
                }, 1500);
            }
        }

        // Create expanding rings
        function createExpandingRings(x, y) {
            const celebrationContainer = document.getElementById('celebrationContainer');
            if (!celebrationContainer) return;
            
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    const ring = document.createElement('div');
                    ring.className = 'celebration-ring';
                    ring.style.left = x + 'px';
                    ring.style.top = y + 'px';
                    
                    celebrationContainer.appendChild(ring);
                    
                    setTimeout(() => {
                        if (ring.parentNode) {
                            ring.remove();
                        }
                    }, 1000);
                }, i * 200);
            }
        }

        // Success message system
        function showSuccessMessage(message) {
            const existingMessage = document.querySelector('.success-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'success-message';
            messageDiv.textContent = message;
            
            document.body.appendChild(messageDiv);
            
            // Slide in
            setTimeout(() => {
                messageDiv.classList.add('show');
            }, 100);
            
            // Slide out and remove
            setTimeout(() => {
                messageDiv.classList.remove('show');
                setTimeout(() => {
                    if (messageDiv.parentNode) {
                        messageDiv.remove();
                    }
                }, 300);
            }, 4000);
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target === document.getElementById('petitionModal')) {
                closePetitionModal();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                if (document.getElementById('petitionModal').classList.contains('show')) {
                    closePetitionModal();
                }
                if (document.getElementById('adminPanel').classList.contains('open')) {
                    closeAdminPanel();
                }
            }
        });

        // Smooth scrolling
        function scrollToPetitions() {
            document.getElementById('petitions').scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }

        // Enhanced smooth scrolling for nav links
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        });

        // Parallax effect for hero section
        window.addEventListener('scroll', function() {
            const scrolled = window.pageYOffset;
            const hero = document.querySelector('.hero');
            const rate = scrolled * -0.3;
            
            if (hero) {
                hero.style.transform = `translateY(${rate}px)`;
            }
            
            // Add scroll-triggered animations
            const cards = document.querySelectorAll('.petition-card');
            cards.forEach(card => {
                const cardTop = card.offsetTop;
                const cardHeight = card.offsetHeight;
                const windowHeight = window.innerHeight;
                
                if (scrolled + windowHeight > cardTop + cardHeight * 0.3) {
                    card.classList.add('fade-in-up');
                }
            });
        });

        // ADMIN ACCESS - Password Protected
        // You can access the admin panel by typing in the browser console: 
        // showAdminPanel()
        function showAdminPanel() {
            const password = prompt('Enter admin password:');
            if (password === '00167875AgoraScipio23$lmao') {
                document.querySelector('.admin-toggle').style.display = 'block';
                toggleAdminPanel();
                console.log('Admin access granted');
            } else {
                alert('Access denied. Invalid password.');
                console.log('Admin access denied - invalid password');
            }
        }

        // Or add petitions directly via console (also password protected):
        // addPetitionDirect(title, category, description, status)
        function addPetitionDirect(title, category, description, status = 'active') {
            const password = prompt('Enter admin password:');
            if (password !== '00167875AgoraScipio23$lmao') {
                alert('Access denied. Invalid password.');
                return null;
            }
            
            const petition = {
                id: generateId(),
                title: title,
                category: category,
                description: description,
                background: 'Additional context will be provided for this petition.',
                impact: 'This petition will have a positive impact on student life.',
                goal: 1000,
                signatures: 0,
                urgency: 'medium',
                priority: 'Medium',
                meetingDate: '',
                daysLeft: 30,
                implementedDate: null,
                createdAt: new Date().toISOString()
            };
            
            petitionsData[status].push(petition);
            saveData();
            updateHeaderStats();
            loadPetitionCards(document.querySelector('.tab.active').textContent.toLowerCase().replace(' petitions', '').replace('recent wins', 'success').replace('under review', 'review'));
            
            console.log('Petition added successfully:', petition);
            return petition;
        }

        // Initialize app when page loads
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>